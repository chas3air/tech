# Раздел I: Linux, Процессы и Системное администрирование

В DevOps Linux — это среда, в которой живет всё: от Docker-контейнеров до баз данных. На собеседовании важно показать понимание того, как "железо" общается с софтом.

## 1. Архитектура и Ядро

* **User Space vs Kernel Space:** Ядро (Kernel) имеет прямой доступ к памяти и железу. Приложения (User Space) изолированы. Чтобы что-то сделать (записать файл, отправить пакет), приложение должно попросить ядро через **System Call**. Это гарантирует, что падение браузера не вызовет падение всей системы.
* **Процесс загрузки:**
1. **BIOS/UEFI** (проверка железа).
2. **Bootloader (GRUB2)** (выбор ядра).
3. **Kernel** (инициализация драйверов, монтирование корня `/`).
4. **Init (Systemd, PID 1)** (запуск всех сервисов).


* **System Calls:** Интерфейс между юзером и ядром. Примеры: `open`, `read`, `fork`, `exec`.

**Как смотреть:**

* `dmesg -T` — сообщения ядра (ошибки железа, OOM Killer).
* `uname -a` — версия ядра и архитектура.

---

## 2. Процессы и Потоки

* **Процесс:** Программа в памяти с выделенными ей ресурсами.
* **Поток (Thread):** "Легковесный процесс" внутри обычного процесса. Потоки делят общую память.
* **Состояния:** `Running` (выполняется), `Sleeping` (ждет), `Stopped`, `Zombie`.
* **Zombie vs Orphan:**
* **Zombie:** Процесс завершен, но висит в таблице PID, пока родитель не заберет его код возврата.
* **Orphan (Сирота):** Родитель умер, процесс усыновлен `systemd` (PID 1).


* **Сигналы:** `SIGTERM (15)` — вежливая просьба закрыться. `SIGKILL (9)` — принудительное завершение ядром.

**Как смотреть:**

* `top` / `htop` — мониторинг нагрузки в реальном времени.
* `ps auxf` — дерево процессов.
* `pstree -p` — наглядная иерархия с PID.
* `kill -9 <PID>` — убить процесс без шанса на сохранение данных.

---

## 3. Управление ресурсами и изоляция

* **Namespaces:** Технология изоляции. Позволяет процессу видеть только свою сеть, свои файлы или свои PID. **Это фундамент контейнеризации.**
* **Cgroups (Control Groups):** Технология ограничения. Лимитирует использование CPU, RAM и I/O для группы процессов.
* **Load Average (LA):** Три числа (1, 5, 15 мин). Показывает среднее число процессов, которые либо используют CPU, либо ждут своей очереди (включая ожидание диска — состояние D).

**Как смотреть:**

* `uptime` — быстрая проверка LA.
* `cat /proc/cpuinfo` — информация о процессорах.
* `free -h` — статус оперативной памяти (свободно/занято/кэш).

---

## 4. Файловая система и I/O

* **Inode:** Уникальный номер файла в системе, хранящий метаданные (права, блоки на диске). Имя файла хранится в директории, а не в иноде.
* **Дескрипторы файлов (FD):** Указатели на открытые ресурсы. 0 (stdin), 1 (stdout), 2 (stderr).
* **Hard vs Soft Links:** Hard link — второе имя для того же Inode. Soft link (symlink) — путь-ярлык.

**Как смотреть:**

* `df -h` — свободное место на дисках.
* `df -i` — проверка **свободных инод** (если они кончатся, файлы не создадутся даже на пустом диске).
* `lsblk` — список дисков и разделов.
* `lsof -p <PID>` — какие файлы или сокеты открыл процесс.
* `iostat -xz 1` — нагрузка на диски (смотрим на `%util` и `await`).
* `iotop` — кто именно из процессов сейчас нагружает диск.

---

## 5. Сеть (Базовая диагностика)

Хотя сети — это следующий большой блок, в контексте Linux нужно уметь базово их проверять.

**Как смотреть:**

* `ip a` — IP-адреса и состояние интерфейсов.
* `ss -tulpn` — список открытых портов и процессов, которые их слушают.
* `ping` / `mtr` — проверка связности и потерь пакетов.
* `dig` / `nslookup` — проверка работы DNS.

---

## 6. Systemd и Логирование

* **Units:** Конфигурации сервисов (`.service`), таймеров (`.timer`) или точек монтирования (`.mount`).
* **Journald:** Системная служба сбора логов.

**Как смотреть:**

* `systemctl status <name>` — статус службы.
* `systemctl restart <name>` — перезапуск.
* `journalctl -u <name> -f` — логи сервиса "в прямом эфире".
* `journalctl -xe` — детальные логи последних ошибок системы.

---

## 7. Troubleshooting (Низкоуровневая отладка)

Если приложение ведет себя странно, а в логах пусто:

* `strace -p <PID>` — показывает все системные вызовы процесса (куда лезет, что читает, на чем виснет).
* `vmstat 1` — общая сводка по ресурсам (свап, ввод/вывод, прерывания).

---
